<!--
  Generated template for the CustomerDetailPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
  <ion-navbar>
    <ion-title>Chi tiết Khách hàng</ion-title>
    <!-- <ion-buttons end>
        <button ion-button clear (click)="onEditCustomer($event)">Sửa</button>
    </ion-buttons> -->
    <ion-buttons end>
        <ion-spinner *ngIf='isLoading' name='dots'></ion-spinner>
    </ion-buttons>
  </ion-navbar>
</ion-header>

<ion-content>
    <ion-card no-padding>
      <ion-list>
        <ion-item >
          <p ion-text color="primary">Khách hàng</p>
          <h2>{{customer.full_name}}</h2>
          <p><ion-icon name="call"></ion-icon> {{customer.phone}}</p>
          <p><ion-icon name="rose"></ion-icon> {{customer.birthday}}</p>
        </ion-item>
      </ion-list>
    </ion-card>

    <ion-card no-padding>
      <ion-item-divider color="light"><p ion-text color="primary">Các xe đã mua</p></ion-item-divider>
      <table ngClass="table">
        <tr ngClass="row-header">
          <th align-items-center>Xe</th>
          <th align-items-center>Mua tại CH</th>
          <th align-items-center>Ngày mua</th>
          <th align-items-center>Ngày hẹn</th>
          <th align-items-center>Dịch vụ</th>
          <th align-items-center>Miễn phí?</th>
          <th align-items-center>Thao tác</th>
        </tr>
        <tr ngClass="row-body" *ngFor='let bike of bikes'>
            <td>{{bike.bike_name}}</td>
            <td>{{bike.shop_name}}</td>
            <td>{{bike.buy_date}}</td>
            <td>{{bike.book_date}}</td>
            <td>{{bike.service_name}}</td>
            <td>{{bike.is_free == 1 ? 'Có' : ''}}</td>
            <td>
              <ion-buttons>
                <button ion-button small clear outline (click)="onMaintance(bike.id)">
                    <ion-icon name="construct"></ion-icon>
                </button>
                <button ion-button small clear outline color="secondary" (click)="onCallout(bike.id)">
                    <ion-icon name="call"></ion-icon>
                </button>
              </ion-buttons>
            </td>
          </tr>
      </table>
    </ion-card>

    <ion-card no-padding>
      <ion-item-divider color="light"><p ion-text color="primary">Lịch sử ghé CH</p></ion-item-divider>
      <table ngClass="table">
        <tr ngClass="row-header">
          <th align-items-center>Xe</th>
          <th align-items-center>Ngày</th>
          <th align-items-center>Loại bảo dưỡng</th>
          <th text-right>Chi phí</th>
          <th align-items-center>Ý kiến</th>
        </tr>
        <tr ngClass="row-body" *ngFor='let man of maintances'>
          <td>{{man.bike_name}}</td>
            <td>{{man.maintance_date}}</td>
            <td>{{man.maintance_name}}</td>
            <td text-right>{{man.total_price | number}}</td>
            <td>{{man.feedback}}</td>
          </tr>
      </table>
    </ion-card>
</ion-content>
