<!--
  Generated template for the CustomerListPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
  <ion-navbar>
    <button ion-button menuToggle>
      <ion-icon name="menu"></ion-icon>
    </button>
    <!-- <ion-title>DS Khách hàng</ion-title> -->
    <ion-searchbar placeholder="Tìm tên hoặc điện thoại" [(ngModel)]='searchString' (ionInput)="searchCustomer($event)"></ion-searchbar>
  </ion-navbar>
</ion-header>

<ion-content no-padding>
  <ion-list>
    <ion-item *ngIf='isSearching'>
      <h2>Đang tải...</h2>
      <ion-spinner name='dots'></ion-spinner>
    </ion-item>
    <ion-item *ngFor='let customer of filterCustomers' (click)='showDetailCustomer($event, customer)'>
        <h2>{{customer.full_name}}</h2>
        <ion-row>
          <ion-col no-padding>
              <p><ion-icon name="call"></ion-icon> {{customer.phone}}</p>
          </ion-col>
          <ion-col no-padding text-right>
              <p><ion-icon name="rose"></ion-icon> {{customer.birthday}}</p>
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col no-padding>
              <p>Lần cuối gọi ra</p>
          </ion-col>
          <ion-col no-padding text-right>
              <p><ion-icon name="clock"></ion-icon> {{customer.last_call_out_date}}</p>
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col no-padding>
              <p>Lần cuối bảo dưỡng</p>
          </ion-col>
          <ion-col no-padding text-right>
              <p><ion-icon name="clock"></ion-icon> {{customer.last_maintance_date}}</p>
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col no-padding>
              <p>Hẹn ngày</p>
          </ion-col>
          <ion-col no-padding text-right>
              <p><ion-icon name="calendar"></ion-icon> {{customer.next_book_date}}</p>
          </ion-col>
        </ion-row>
        <p><ion-icon name="pin"></ion-icon> {{customer.precinct}}, {{customer.district}}</p>
    </ion-item>
  </ion-list>
  <ion-fab bottom right>
    <button ion-fab mini (click)="onAddCustomer($event)">
      <ion-icon name="add"></ion-icon>
    </button>
  </ion-fab>
</ion-content>
